<!DOCTYPE html>
<html>
<head>
    <title>Image Loading Debug Test</title>
    <style>
        .test-container { max-width: 800px; margin: 50px auto; font-family: Arial, sans-serif; }
        .test-image-container { 
            height: 240px; 
            width: 300px; 
            background: #f0f0f0; 
            border: 2px solid #ddd; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            margin: 20px auto;
            position: relative;
            overflow: hidden;
        }
        .test-image-container img { 
            width: 100%; 
            height: 100%; 
            object-fit: cover; 
            display: block;
        }
        .no-image {
            text-align: center;
            color: #666;
        }
        .log { 
            background: #f8f9fa; 
            padding: 15px; 
            border-radius: 5px; 
            margin: 20px 0;
            font-family: monospace;
            white-space: pre-line;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>🔍 Image Loading Debug Test</h1>
        <p>This test checks if our anime images load correctly.</p>
        
        <h3>Test 1: Attack on Titan (High Quality URL)</h3>
        <div class="test-image-container" id="test1">
            <img src="https://cdn.myanimelist.net/images/anime/10/47347l.jpg" 
                 alt="Attack on Titan"
                 onload="logMessage('✅ Test 1: Image loaded successfully'); this.style.display='block';"
                 onerror="logMessage('❌ Test 1: Image failed to load'); this.style.display='none'; this.parentNode.innerHTML='<div class=\"no-image\">Image Failed to Load</div>';">
        </div>
        
        <h3>Test 2: Demon Slayer (High Quality URL)</h3>
        <div class="test-image-container" id="test2">
            <img src="https://cdn.myanimelist.net/images/anime/1286/99889l.jpg" 
                 alt="Demon Slayer"
                 onload="logMessage('✅ Test 2: Image loaded successfully'); this.style.display='block';"
                 onerror="logMessage('❌ Test 2: Image failed to load'); this.style.display='none'; this.parentNode.innerHTML='<div class=\"no-image\">Image Failed to Load</div>';">
        </div>
        
        <h3>Test 3: Invalid URL (Should fail)</h3>
        <div class="test-image-container" id="test3">
            <img src="https://invalid-url-that-should-fail.jpg" 
                 alt="Invalid Image"
                 onload="logMessage('✅ Test 3: Image loaded successfully'); this.style.display='block';"
                 onerror="logMessage('❌ Test 3: Image failed to load (expected)'); this.style.display='none'; this.parentNode.innerHTML='<div class=\"no-image\">Image Failed to Load</div>';">
        </div>
        
        <div class="log" id="log">
            📋 Event Log:\n
        </div>
    </div>
    
    <script>
        function logMessage(message) {
            const log = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            log.textContent += `[${timestamp}] ${message}\n`;
        }
        
        // Initial log
        logMessage('🚀 Test started - checking image loading...');
        
        // Check after 5 seconds
        setTimeout(() => {
            logMessage('⏰ 5 second check complete');
            
            // Count successful loads
            const images = document.querySelectorAll('img');
            let loadedCount = 0;
            let failedCount = 0;
            
            images.forEach((img, index) => {
                if (img.style.display !== 'none' && img.complete && img.naturalWidth > 0) {
                    loadedCount++;
                } else {
                    failedCount++;
                }
            });
            
            logMessage(`📊 Summary: ${loadedCount} images loaded, ${failedCount} images failed`);
        }, 5000);
    </script>
</body>
</html>